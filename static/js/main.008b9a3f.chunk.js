(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{24:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var o=n(13),c=(n(22),n(23),n(24),n(7)),r=n(2),i=n(0),l=n(4);var a=n(5),s=n.n(a),u=n(1),d=function(t){var e=t.onEditSubmit,n=t.todo,o=t.inputValue,c=t.setInputValue,r=t.inputRef,i=t.setIsTodoEditing,l=t.onKeyDownHandler;return Object(u.jsx)("form",{onSubmit:function(t){return e(t,n.id,n.completed)},className:"todo__title-form",children:Object(u.jsx)("input",{type:"text",value:o,onChange:function(t){return c(t.target.value)},ref:r,onBlur:function(){return i(!1)},onKeyDown:l,className:"todo__input"})})},b=function(t){var e=t.isCurrentClicked,n=t.todo,o=t.todos,c=t.visibleTodos,l=t.setVisibleTodos,a=t.clickedIndex,b=t.setClickedIndex,f=t.index,j=t.setTodos,p=Object(i.useRef)(null),m=Object(i.useState)(!1),v=Object(r.a)(m,2),O=v[0],h=v[1],x=Object(i.useState)(""),y=Object(r.a)(x,2),T=y[0],k=y[1],_=n.title,g=n.completed,N=n.id;var E;return Object(i.useEffect)((function(){return function(){return clearTimeout(E)}}),[]),Object(u.jsxs)("li",{"data-cy":"Todo",className:s()("todo",{completed:g}),onDoubleClick:function(){var t;t=f,h(!0),b(t),k(_),h(!0),E=setTimeout((function(){var t;p&&(null===(t=p.current)||void 0===t||t.focus())}),0)},children:[Object(u.jsx)("label",{className:s()("todo__status-label",{hidden:O&&e}),children:Object(u.jsx)("input",{"data-cy":"TodoStatus",type:"checkbox",className:"todo__status",defaultChecked:!0,onClick:function(){var t;b(f),t=N,c.find((function(e){return e.id===t}))&&j(function(t,e){return t.map((function(t){var n=t;return e===t.id&&(n.completed=!t.completed),n}))}(o,t))}})}),O&&f===a?Object(u.jsx)(d,{onEditSubmit:function(t,e,n){var o,r;t.preventDefault();var i,l=null===(o=c.find((function(t){return t.id===e})))||void 0===o?void 0:o.title;0!==(null===(r=p.current)||void 0===r?void 0:r.value.length)?T!==l?p.current&&j((function(t){return t.map((function(t){var o=t;return t.id===e&&p.current&&(o.title=p.current.value.trim(),o.completed=n),o}))})):null===(i=p.current)||void 0===i||i.blur():j((function(t){return t.filter((function(t){return t.id!==e}))}))},todo:n,inputValue:T,setInputValue:k,inputRef:p,setIsTodoEditing:h,onKeyDownHandler:function(t){var e;"Escape"===t.nativeEvent.key&&(null===(e=p.current)||void 0===e||e.blur())}}):Object(u.jsx)("span",{"data-cy":"TodoTitle",className:"todo__title",children:_}),Object(u.jsx)("button",{type:"button",className:s()("todo__remove",{hidden:O&&f===a}),"data-cy":"TodoDeleteButton",onClick:function(){var t;b(f),t=N,l((function(e){return e.filter((function(e){return e.id!==t}))})),j((function(e){return e.filter((function(e){return e.id!==t}))}))},children:"\xd7"})]})},f=function(t){var e=t.setVisibleTodos,n=t.clickedIndex,o=t.setClickedIndex,c=t.visibleTodos,r=t.todos,i=t.setTodos;return Object(u.jsx)("ul",{className:"todoapp__main","data-cy":"TodoList",children:c.map((function(t,l){return Object(u.jsx)(b,{isCurrentClicked:l===n,visibleTodos:c,setVisibleTodos:e,clickedIndex:n,setClickedIndex:o,todos:r,todo:t,index:l,setTodos:i},function(t,e){return"".concat(t+e,"_").concat((new Date).getTime())}(t.id,l))}))})},j="all",p="active",m="completed",v=function(t){var e=t.todos,n=t.setTodos,o=t.visibleTodos,l=Object(c.b)(),a=Object(r.a)(l,2),d=a[0],b=a[1],f=o.filter((function(t){return t.completed})),v=e.filter((function(t){return!t.completed})).length,O=Object(i.useMemo)((function(){return d.get("filter")||j}),[d]),h=function(t){var e,n;b((e=d,n={filter:t},Object.entries(n).forEach((function(t){var n=Object(r.a)(t,2),o=n[0],c=n[1];null===c?e.delete(o):e.set(o,c)})),e.toString()))};return Object(u.jsxs)("footer",{className:"todoapp__footer","data-cy":"Footer",children:[Object(u.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:"".concat(v," items left")}),Object(u.jsxs)("nav",{className:"filter","data-cy":"Filter",children:[Object(u.jsx)("button",{type:"button","data-cy":"FilterLinkAll",className:s()("filter__link",{selected:O===j}),onClick:function(){return h(j)},children:"All"}),Object(u.jsx)("button",{type:"button","data-cy":"FilterLinkActive",className:s()("filter__link",{selected:O===p}),onClick:function(){return h(p)},children:"Active"}),Object(u.jsx)("button",{type:"button","data-cy":"FilterLinkCompleted",className:s()("filter__link",{selected:O===m}),onClick:function(){return h(m)},children:"Completed"})]}),Object(u.jsx)("button",{"data-cy":"ClearCompletedButton",type:"button",className:s()("todoapp__clear-completed",{hidden:0===f.length}),onClick:function(){n(e.filter((function(t){return!t.completed})))},children:"Clear completed"})]})},O=function(t){var e=t.visibleTodos,n=t.setTodos,o=e.every((function(t){return t.completed}));return Object(u.jsx)("button",{"aria-label":"toggle","data-cy":"ToggleAllButton",type:"button",className:s()("todoapp__toggle-all",{active:o}),onClick:function(){n((function(t){return t.map((function(t){var e=t;return e.completed=!o,e}))}))}})},h=Object(i.createContext)({isEmptyTitleErrorShown:!1,setIsEmptyTitleErrorShown:function(){}});var x=function(){var t=Object(c.b)(),e=Object(r.a)(t,1)[0],n=function(t,e){var n=Object(i.useState)((function(){if("undefined"===typeof window)return JSON.parse(e);try{var n=window.localStorage.getItem(t);return n?JSON.parse(n):JSON.parse(e)}catch(o){return JSON.parse(e)}})),o=Object(r.a)(n,2),c=o[0],l=o[1];return[c,function(e){var n=e instanceof Function?e(c):e;l(n),"undefined"!==typeof window&&window.localStorage.setItem(t,JSON.stringify(n))}]}("todos","[]"),o=Object(r.a)(n,2),a=o[0],s=o[1],d=Object(i.useState)([]),b=Object(r.a)(d,2),x=b[0],y=b[1],T=Object(i.useContext)(h).setIsEmptyTitleErrorShown,k=Object(i.useRef)(null),_=Object(i.useState)(-1),g=Object(r.a)(_,2),N=g[0],E=g[1];Object(i.useEffect)((function(){y(a),k.current&&k.current.focus()}),[]);var C=Object(i.useMemo)((function(){return e.get("filter")||j}),[e]);return Object(i.useEffect)((function(){switch(C){case j:y(a);break;case m:y(a.filter((function(t){return t.completed})));break;case p:y(a.filter((function(t){return!t.completed})));break;default:throw new Error("Wrong Type")}}),[C,a]),Object(u.jsxs)("div",{className:"todoapp__content",children:[Object(u.jsxs)("header",{className:"todoapp__header",children:[!!x.length&&Object(u.jsx)(O,{setTodos:s,visibleTodos:x}),Object(u.jsx)("form",{onSubmit:function(t){var e,n,o;t.preventDefault(),E(x.length);var c=null===k||void 0===k||null===(e=k.current)||void 0===e?void 0:e.value.trim();if(null===c||void 0===c?void 0:c.length){var r=null===(n=a[a.length-1])||void 0===n?void 0:n.id,i={title:(null===(o=k.current)||void 0===o?void 0:o.value.trim())||"",completed:!1,id:r+1||0};s((function(t){return[].concat(Object(l.a)(t),[i])})),k.current&&(k.current.value="")}else T(!0)},children:Object(u.jsx)("input",{"data-cy":"NewTodoField",type:"text",ref:k,className:"todoapp__new-todo",placeholder:"What needs to be done?"})})]}),Object(u.jsx)(f,{visibleTodos:x,setVisibleTodos:y,clickedIndex:N,setClickedIndex:E,setTodos:s,todos:a}),!!a.length&&Object(u.jsx)(v,{visibleTodos:x,todos:a,setTodos:s})]})},y=function(){var t=Object(i.useContext)(h),e=t.isEmptyTitleErrorShown,n=t.setIsEmptyTitleErrorShown,o=Object(i.useState)(!1),c=Object(r.a)(o,2),l=c[0],a=c[1],d=!l&&e;return Object(i.useEffect)((function(){var t=setTimeout((function(){n(!1),a(!1)}),3e3);return function(){return clearTimeout(t)}}),[e]),Object(u.jsx)(u.Fragment,{children:d&&Object(u.jsxs)("div",{"data-cy":"ErrorNotification",className:s()("notification","is-danger","is-light","has-text-weight-normal"),children:[Object(u.jsx)("button",{"aria-label":"delete",type:"button","data-cy":"HideErrorButton",className:"delete",onClick:function(){a(!0),n(!1),a(!1)}}),"Title can`t be empty",Object(u.jsx)("br",{})]})})},T=function(){var t=Object(i.useState)(!1),e=Object(r.a)(t,2),n={isEmptyTitleErrorShown:e[0],setIsEmptyTitleErrorShown:e[1]};return Object(u.jsx)(h.Provider,{value:n,children:Object(u.jsxs)("div",{className:"todoapp",children:[Object(u.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(u.jsx)(x,{}),Object(u.jsx)(y,{})]})})},k=function(){return Object(u.jsx)(c.a,{children:Object(u.jsx)(T,{})})};Object(o.createRoot)(document.getElementById("root")).render(Object(u.jsx)(k,{}))}},[[27,1,2]]]);
//# sourceMappingURL=main.008b9a3f.chunk.js.map